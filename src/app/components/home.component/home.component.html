<div class="container-fluid main-container p-4 content-limiter">

    <div class="welcome-header mb-4">
    <h1 class="welcome-title">
      Hola, <span class="user-highlight"> {{perfil.nombre}} !</span>
    </h1>
  </div>

  <details class="section-wrapper mb-4" open>
    <summary class="section-header d-flex align-items-center justify-content-between p-3 rounded">
      <div class="d-flex align-items-center">
        <div class="icon-box me-3 bg-accent text-white">
          <i class="bi bi-calendar-check"></i>
        </div>
        <h2 class="section-title mb-0">Pr√≥ximos Eventos</h2>
      </div>
      <i class="bi bi-chevron-down transition-icon"></i>
    </summary>

    <div class="section-content mt-2 d-flex flex-column gap-2">
      @for (event of eventos; track event.idEvento) {
        @if (event.fechaEvento >= now) {
          
          <div class="event-row shadow-sm">
            <div class="date-badge-left">
               <span class="day-number">{{ event.fechaEvento | date:'dd' }}</span>
               <span class="month-name">{{ event.fechaEvento | date:'MMM' | uppercase }}</span>
            </div>
            
            <div class="row-body d-flex align-items-center justify-content-between gap-3">
               <div class="time-info d-flex align-items-center">
                  <i class="bi bi-clock-fill text-accent me-2 fs-5"></i>
                  <span class="fs-5 fw-bold text-dark">{{ event.fechaEvento | date:'HH:mm' }}h</span>
               </div>
               <button class="btn btn-sm btn-outline-accent rounded-pill px-3 fw-semibold">
                 Ver actividades
               </button>
            </div>
          </div>

        }
      }
    </div>
  </details>


  <details class="section-wrapper mb-5">
    <summary class="section-header d-flex align-items-center justify-content-between p-3 rounded header-secondary">
      <div class="d-flex align-items-center">
        <div class="icon-box me-3 bg-secondary-subtle text-secondary">
          <i class="bi bi-calendar-x"></i>
        </div>
        <h2 class="section-title text-secondary mb-0">Eventos Finalizados</h2>
      </div>
      <i class="bi bi-chevron-down transition-icon"></i>
    </summary>

    <div class="section-content mt-2 d-flex flex-column gap-2">
      @for (event of eventos; track event.idEvento) {
        @if (event.fechaEvento < now) {
          
          <div class="event-row shadow-sm past-row">
            <div class="date-badge-left">
               <span class="day-number">{{ event.fechaEvento | date:'dd' }}</span>
               <span class="month-name">{{ event.fechaEvento | date:'MMM' | uppercase }}</span>
            </div>
            
            <div class="row-body d-flex align-items-center justify-content-between gap-3">
               <div class="time-info d-flex align-items-center">
                  <i class="bi bi-clock-fill text-accent me-2 fs-5"></i>
                  <span class="fs-5 fw-bold text-dark">{{ event.fechaEvento | date:'HH:mm' }}h</span>
               </div>
               <button class="btn btn-sm btn-outline-accent rounded-pill px-3 fw-semibold">
                 Ver actividades
               </button>
            </div>
          </div>

        }
      }
    </div>
  </details>

  <div class="calendar-section mt-5 p-4 bg-white rounded shadow-sm border">
     
     <div class="d-flex align-items-center mb-4">
        <i class="bi bi-calendar3 text-accent fs-3 me-2"></i>
        <h3 class="text-main fw-bold mb-0">Calendario</h3>
     </div>

     <div class="calendar-wrapper">
        <full-calendar [options]="calendarOptions"></full-calendar>
     </div>

  </div>

</div>