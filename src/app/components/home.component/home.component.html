
<div class="container-fluid main-container p-4">

  <!-- Welcome Header -->
  <div class="welcome-section mb-4">
    <div class="welcome-header">
      <h1 class="welcome-title">
        Hola, <span class="user-highlight">{{perfil.nombre}}</span>! ðŸ‘‹
      </h1>
      <p class="welcome-subtitle">Gestiona tus eventos y actividades</p>
    </div>
  </div>

  <!-- Two Column Layout (Top) + Calendar (Bottom) -->
  <div class="professional-layout">
    
    <!-- TOP ROW: Events and Activities -->
    <div class="top-row">
      
      <!-- LEFT: Events List -->
      <aside class="events-column">
        <div class="card-container">
          <div class="card-header">
            <div class="d-flex align-items-center">
              <div class="icon-box me-3 bg-accent text-white">
                <i class="bi bi-calendar-event"></i>
              </div>
              <h2 class="card-title mb-0">Eventos</h2>
            </div>
          </div>

          <!-- Tabs for Upcoming/Past Events -->
          <div class="event-tabs">
            <button class="tab-btn active" onclick="this.classList.add('active'); this.nextElementSibling.classList.remove('active'); document.getElementById('upcoming').style.display='block'; document.getElementById('past').style.display='none';">
              <i class="bi bi-calendar-check me-2"></i>PrÃ³ximos
            </button>
            <button class="tab-btn" onclick="this.classList.add('active'); this.previousElementSibling.classList.remove('active'); document.getElementById('upcoming').style.display='none'; document.getElementById('past').style.display='block';">
              <i class="bi bi-calendar-x me-2"></i>Finalizados
            </button>
          </div>

          <!-- Upcoming Events -->
          <div id="upcoming" class="events-scroll-area">
            <ng-container *ngFor="let event of eventos">
              <div *ngIf="event.fechaEvento >= now" class="event-card" (click)="onclickEvento(event.idEvento)" [class.active]="idEvento === event.idEvento">
                <div class="event-date">
                  <span class="date-day">{{ event.fechaEvento | date:'dd' }}</span>
                  <span class="date-month">{{ event.fechaEvento | date:'MMM' | uppercase }}</span>
                </div>
                <div class="event-info">
                  <div class="event-time">
                    <i class="bi bi-clock me-2"></i>
                    {{ event.fechaEvento | date:'HH:mm' }}h
                  </div>
                  <div class="event-id">#{{event.idEvento}}</div>
                </div>
              </div>
            </ng-container>
          </div>

          <!-- Past Events -->
          <div id="past" class="events-scroll-area" style="display: none;">
            <ng-container *ngFor="let event of eventos">
              <div *ngIf="event.fechaEvento < now" class="event-card past" (click)="onclickEvento(event.idEvento)" [class.active]="idEvento === event.idEvento">
                <div class="event-date">
                  <span class="date-day">{{ event.fechaEvento | date:'dd' }}</span>
                  <span class="date-month">{{ event.fechaEvento | date:'MMM' | uppercase }}</span>
                </div>
                <div class="event-info">
                  <div class="event-time">
                    <i class="bi bi-clock me-2"></i>
                    {{ event.fechaEvento | date:'HH:mm' }}h
                  </div>
                  <div class="event-id">#{{event.idEvento}}</div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </aside>

      <!-- RIGHT: Activities -->
      <section class="activities-column">
        <div class="card-container activities-card">
          <div class="card-header">
            <div class="d-flex align-items-center">
              <div class="icon-box me-3 bg-success text-white">
                <i class="bi bi-list-check"></i>
              </div>
              <h2 class="card-title mb-0">Actividades</h2>
            </div>
          </div>
          <div class="activities-content">
            <ng-container *ngIf="idEvento != null; else placeholder">
              <app-actividades [idEvento]="idEvento"></app-actividades>
            </ng-container>
            <ng-template #placeholder>
              <div class="empty-state">
                <i class="bi bi-hand-index fs-1 mb-3"></i>
                <h4>Selecciona un evento</h4>
                <p class="muted">Haz clic en un evento de la izquierda para ver sus actividades</p>
              </div>
            </ng-template>
          </div>
        </div>
      </section>

    </div>

    <!-- BOTTOM ROW: Calendar (Full Width) -->
    <div class="calendar-row">
      <div class="card-container">
        <div class="card-header">
          <div class="d-flex align-items-center">
            <div class="icon-box me-3 bg-warning text-white">
              <i class="bi bi-calendar3"></i>
            </div>
            <h2 class="card-title mb-0">Calendario</h2>
          </div>
        </div>
        <div class="calendar-content">
          <full-calendar [options]="calendarOptions"></full-calendar>
        </div>
      </div>
    </div>

  </div>

</div>
